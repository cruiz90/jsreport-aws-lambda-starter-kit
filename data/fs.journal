
{"operation":"update","timestamp":{"$$date":1716571869893},"version":2177,"doc":{"name":"main-book","engine":"handlebars","recipe":"chrome-pdf","data":{"shortid":"rh0SV69fv"},"shortid":"SWMIFoc50","chrome":{"printBackground":true,"marginTop":"2cm","marginRight":"2cm","marginBottom":"2cm","marginLeft":"2cm"},"creationDate":{"$$date":1708462689969},"modificationDate":{"$$date":1716571869884},"_id":"iYkT34XS8zhTH4Fj","$entitySet":"templates","pdfOperations":[{"type":"merge","mergeWholeDocument":true,"templateShortid":"d-IIS7RWC"},{"type":"merge","mergeWholeDocument":true,"templateShortid":"w_uIP781o","mergeToFront":false},{"type":"merge","mergeWholeDocument":true,"templateShortid":"HI3nQ0YhO","mergeToFront":false,"enabled":false},{"type":"prepend","mergeWholeDocument":true,"templateShortid":"8b03WZU_g"}],"content":"<html>\n\n<head>\n    <style>\n        {{asset \"book-styles.css\"}}\n    </style>\n    <meta charset=\"UTF-8\">\n</head>\n<body>\n    <!--\n        TOC\n        -----------\n        we render TOC template twice\n        the first in the main template - this is needed for inner pdf links\n        the second time it is rendered as merge operation in pdf utils - this is needed to for gettign page numbers in TOC\n\n    -->\n    {{#if result.topicPages}}\n        {#child ./toc @template.recipe=html}\n    {{/if}}\n    <div class=\"content main-pdf\">\n        {#child ./figures-tables-lists @template.recipe=html}\n\n        {{#with result.body}}\n            <div style='page-break-before: always;'></div>\n            <div class=\"book-body\">{{{this}}}</div>\n        {{/with}}\n        {{#level result.topicPages}}\n            {{#if body}}\n                <h1 id=\"{{topicId}}\" class=\"{{type}}\">{{title}}</h1>\n                {{{pdfAddPageItem id=topicId}}}\n                <div>{{{body}}}</div>\n            {{/if}}\n        {{/level}}\n\n        <span class=\"copyright-info\">\n            {{#with result.copyright}}\n                {{this}}.\n            {{else}}\n                Copyright {{currentYear}}.\n            {{/with}}\n            {{~#with result.date}}\n                PDF Generated on {{this}}\n            {{/with}}\n        </span>\n    </div>\n</body>\n</html>","helpers":"function level (chapters, opts, currentLevel = 0) {\n    let res = ''\n\n    for (const ch of chapters) {\n        if (!ch.body) {\n            return\n        }\n        if (currentLevel === 0) {\n            res += '<div style=\\'page-break-before: always;\\'></div>';\n            res += opts.fn({ ...ch, type: 'menu' });\n        } else {\n            res += opts.fn({ ...ch, type: 'submenu' });\n        }\n\n        if (ch.topicPages) {\n            res += Handlebars.helpers.level(ch.topicPages, opts, currentLevel + 1)\n        }\n    }\n\n    return res\n}\n\nfunction currentYear () {\n    const date = new Date();\n    return date.getFullYear();\n}\n","folder":{"shortid":"lNM9QvZ"},"$$etag":1716571869893}}
{"operation":"reload","timestamp":{"$$date":1716571875458},"version":2178,"doc":{}}
